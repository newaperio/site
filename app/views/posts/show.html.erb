<% title @post.title %>
<%= render :partial => "posts/#{@post.post_type.name.downcase}", :locals => {:post => @post, :single => true} %>

<h3>Comments</h3>

<div id="comments">
	<% if @comments.count > 0 %>
	<%= render :partial => 'comment', :collection => @comments %>
	<% else %>
	  <p>No comments yet!</p>
	<% end %>	
</div>

<div id="addcomment">
<h3>Add New Comment</h3>
<%= form_for [@post, @comment] do |f| -%>
	<% if @comment.errors.any? %>
		<div id="error_explanation">
			<strong><%= pluralize(@comment.errors.count, "error") %> prohibited this comment from being added:</strong>

			<ul>
			<% @comment.errors.full_messages.each do |msg| %>
				<li><%= msg %></li>
			<% end %>
			</ul>
		</div>
	<% end %>
	<%= f.hidden_field :post_id %>
	<p><%= f.label :name %><br />
  <%= f.text_field :name %></p>
	<p><%= f.label :email %><br />
  <%= f.text_field :email %></p>
  <p><%= f.label :url, "Homepage" %><br />
  <%= f.text_field :url %></p> 
  <p><%= f.label :content %><br />
  <%= f.text_area :content, :rows => '12', :cols => 35 %></p>
  
  <%= f.submit "Submit", :disable_with => 'Saving...' %>
<% end %>
</div>