<article id="single" class="post">
	<header>
		<h2><%= @post.title %></h2>
		<div class="meta">by <%= @post.author.name %> on <time datetime="<%= @post.updated_at %>" pubdate><%= @post.updated_at.to_s(:short) %></time> with <%= pluralize(@comments.count,"comment") %></div>
	</header>
	<p><%= textilize(@post.content) %></p>
</article>

<h3>Comments</h3>
<div id="addcomment">
<h4>Add New Comment</h4>
<%= form_for @newcomment do |f| -%>
	<% if @newcomment.errors.any? %>
		<div id="error_explanation">
			<%= pluralize(@newcomment.errors.count, "error") %> prohibited this comment from being added:

			<ul>
			<% @newcomment.errors.full_messages.each do |msg| %>
				<li><%= msg %></li>
			<% end %>
			</ul>
		</div>
	<% end %>
	<%= f.hidden_field :post_id %>
	<p><%= f.label :name %><br />
  <%= f.text_field :name %></p>
	<p><%= f.label :email %><br />
  <%= f.text_field :email %></p>
  <p><%= f.label :url %><br />
  <%= f.text_field :url %></p> 
  <p><%= f.label :content %><br />
  <%= f.text_area :content %></p>
  
  <%= f.submit "Submit", :disable_with => 'Saving...' %>
<% end %>
</div>

<%= render :partial => 'comment', :collection => @comments %>

<% paginate @comments %>